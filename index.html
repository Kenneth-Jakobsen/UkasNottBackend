<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ukas NÃ¸tt1</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>

    <div id="app"></div>





    <script>

        
        let studentData;
        let team1 = [];
        let team2 = [];
        let team3 = [];
        let team4 = [];
        let team5 = [];
        let team6 = [];
        let students = [];
        
        async function Run() {
            await getStudents();
            showTable("Team 1", team1);
            showTable("Team 2", team2);
            showTable("Team 3", team3);
            showTable("Team 4", team4);
            showTable("Team 5", team5);
            showTable("Team 6", team6);
        }

       async function getStudents() {
            await axios.get('https://localhost:7182/Student')
            .then(response => {
                studentData = response.data;
                for (let student of studentData)
                 {
                students.push(student.name);
                switch(student.teamNumber){
                    case 1:
                    team1.push(student);
                    break;
                case 2:
                    team2.push(student);
                    break;
                case 3:
                    team3.push(student);
                    break;
                case 4:
                    team4.push(student);
                    break;
                case 5:
                    team5.push(student);
                    break;
                case 6:
                    team6.push(student);
                    break;
                }
                 }
            })
            .catch(error => {
                console.error('Error fetching data:', error);  // Handle errors
            });
        }

        function showTable(team, teamNumber) {
            document.getElementById("app").innerHTML += /*HTML*/`
            <h2>${team}</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Description</th>
                </tr>
                ${showTableRows(teamNumber)}
            </table>
            `;
        }

        function showTableRows(team) {
            var rows="";
            team.forEach(student => {
             rows +=`<tr>
                            <td>${student.name}</td>
                            <td>${student.description}</td>
                        </tr>`});
            return rows;
        }

            Run();
    </script>


</body>

</html>